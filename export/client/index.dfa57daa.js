import{S as s,i as e,s as r,b as o,f as i,o as a,m as t,t as f,a as n,j as p,d as l,r as u,v as m}from"./client.0b5a1f8a.js";import{g as v}from"./api.c8188bb8.js";import"./index.6e54a32a.js";import{P as c}from"./_Profile.3214c4f8.js";function $(s){var e,r,u;document.title=e=s.profile.username+" Ignat Japan";var m=new c({props:{profile:s.profile,favorites:s.favorites,user:s.$session.user}});return{c(){r=o(),m.$$.fragment.c()},l(s){r=i(s),m.$$.fragment.l(s)},m(s,e){a(s,r,e),t(m,s,e),u=!0},p(s,r){u&&!s.profile||e===(e=r.profile.username+" Ignat Japan")||(document.title=e);var o={};s.profile&&(o.profile=r.profile),s.favorites&&(o.favorites=r.favorites),s.$session&&(o.user=r.$session.user),m.$set(o)},i(s){u||(f(m.$$.fragment,s),u=!0)},o(s){n(m.$$.fragment,s),u=!1},d(s){s&&p(r),l(m,s)}}}async function d({params:s},{user:e}){const r=s.user.slice(1),{profile:o}=await v(`profiles/${r}`,e&&e.token);return{profile:o,favorites:"favorites"===s.view}}function g(s,e,r){let o,{profile:i,favorites:a}=e;const{session:t}=u();return m(s,t,s=>{r("$session",o=s)}),s.$set=s=>{"profile"in s&&r("profile",i=s.profile),"favorites"in s&&r("favorites",a=s.favorites)},{profile:i,favorites:a,session:t,$session:o}}export default class extends s{constructor(s){super(),e(this,s,g,$,r,["profile","favorites"])}}export{d as preload};
