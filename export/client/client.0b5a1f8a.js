function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function r(e){return e()}function s(){return Object.create(null)}function a(e){e.forEach(r)}function o(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function c(e,t,n){e.$$.on_destroy.push(function(e,t){const n=e.subscribe(t);return n.unsubscribe?()=>n.unsubscribe():n}(t,n))}function l(e,t,n){if(e){const r=u(e,t,n);return e[0](r)}}function u(e,t,r){return e[1]?n({},n(t.$$scope.ctx,e[1](r?r(t):{}))):t.$$scope.ctx}function f(e,t,r,s){return e[1]?n({},n(t.$$scope.changed||{},e[1](s?s(r):{}))):t.$$scope.changed||{}}function p(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function d(e){return null==e?"":e}function h(e,t,n=t){return e.set(n),t}const m="undefined"!=typeof window;let g=m?()=>window.performance.now():()=>Date.now(),$=m?e=>requestAnimationFrame(e):e;const v=new Set;let _,E=!1;function b(){v.forEach(e=>{e[0](g())||(v.delete(e),e[1]())}),(E=v.size>0)&&$(b)}function y(e,t){e.appendChild(t)}function S(e,t,n){e.insertBefore(t,n||null)}function w(e){e.parentNode.removeChild(e)}function x(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function P(e){return document.createElement(e)}function L(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function A(e){return document.createTextNode(e)}function j(){return A(" ")}function R(){return A("")}function C(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function O(e){return function(t){return t.preventDefault(),e.call(this,t)}}function k(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function D(e,t,n){t in e?e[t]=n:k(e,t,n)}function I(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink",t,n)}function N(e){return Array.from(e.childNodes)}function H(e,t,n,r){for(let r=0;r<e.length;r+=1){const s=e[r];if(s.nodeName===t){for(let e=0;e<s.attributes.length;e+=1){const t=s.attributes[e];n[t.name]||s.removeAttribute(t.name)}return e.splice(r,1)[0]}}return r?L(t):P(t)}function U(e,t){for(let n=0;n<e.length;n+=1){const r=e[n];if(3===r.nodeType)return r.data=""+t,e.splice(n,1)[0]}return A(t)}function q(e){return U(e," ")}function V(e,t){t=""+t,e.data!==t&&(e.data=t)}function T(e,t){(null!=t||e.value)&&(e.value=t)}function J(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function M(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const n=document.createElement("object");let r;return n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;"),n.type="text/html",n.tabIndex=-1,n.onload=()=>{(r=n.contentDocument.defaultView).addEventListener("resize",t)},/Trident/.test(navigator.userAgent)?(e.appendChild(n),n.data="about:blank"):(n.data="about:blank",e.appendChild(n)),{cancel:()=>{r&&r.removeEventListener&&r.removeEventListener("resize",t),e.removeChild(n)}}}function z(e,t,n){e.classList[n?"add":"remove"](t)}function B(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}let K,F=0,G={};function W(e,t,n,r,s,a,o,i=0){const c=16.666/r;let l="{\n";for(let e=0;e<=1;e+=c){const r=t+(n-t)*a(e);l+=100*e+`%{${o(r,1-r)}}\n`}const u=l+`100% {${o(n,1-n)}}\n}`,f=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${i}`;if(!G[f]){if(!_){const e=P("style");document.head.appendChild(e),_=e.sheet}G[f]=!0,_.insertRule(`@keyframes ${f} ${u}`,_.cssRules.length)}const p=e.style.animation||"";return e.style.animation=`${p?`${p}, `:""}${f} ${r}ms linear ${s}ms 1 both`,F+=1,f}function X(e,t){e.style.animation=(e.style.animation||"").split(", ").filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")).join(", "),t&&!--F&&$(()=>{if(F)return;let e=_.cssRules.length;for(;e--;)_.deleteRule(e);G={}})}function Y(e){K=e}function Q(){if(!K)throw new Error("Function called outside component initialization");return K}function Z(e){Q().$$.before_update.push(e)}function ee(e){Q().$$.on_mount.push(e)}function te(){const e=K;return(t,n)=>{const r=e.$$.callbacks[t];if(r){const s=B(t,n);r.slice().forEach(t=>{t.call(e,s)})}}}function ne(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(e=>e(t))}const re=[],se=[],ae=[],oe=[],ie=Promise.resolve();let ce,le=!1;function ue(){le||(le=!0,ie.then(he))}function fe(){return ue(),ie}function pe(e){ae.push(e)}function de(e){oe.push(e)}function he(){const e=new Set;do{for(;re.length;){const e=re.shift();Y(e),me(e.$$)}for(;se.length;)se.pop()();for(let t=0;t<ae.length;t+=1){const n=ae[t];e.has(n)||(n(),e.add(n))}ae.length=0}while(re.length);for(;oe.length;)oe.pop()();le=!1}function me(e){e.fragment&&(e.update(e.dirty),a(e.before_update),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(pe))}function ge(e,t,n){e.dispatchEvent(B(`${t?"intro":"outro"}${n}`))}const $e=new Set;let ve;function _e(){ve={r:0,c:[],p:ve}}function Ee(){ve.r||a(ve.c),ve=ve.p}function be(e,t){e&&e.i&&($e.delete(e),e.i(t))}function ye(e,t,n,r){if(e&&e.o){if($e.has(e))return;$e.add(e),ve.c.push(()=>{$e.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}const Se={duration:0};function we(n,r,s,i){let c=r(n,s),l=i?0:1,u=null,f=null,p=null;function d(){p&&X(n,p)}function h(e,t){const n=e.b-l;return t*=Math.abs(n),{a:l,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function m(r){const{delay:s=0,duration:o=300,easing:i=t,tick:m=e,css:_}=c||Se,y={start:g()+s,b:r};r||(y.group=ve,ve.r+=1),u?f=y:(_&&(d(),p=W(n,l,r,o,s,i,_)),r&&m(0,1),u=h(y,o),pe(()=>ge(n,r,"start")),function(e){let t;E||(E=!0,$(b)),new Promise(n=>{v.add(t=[e,n])})}(e=>{if(f&&e>f.start&&(u=h(f,o),f=null,ge(n,u.b,"start"),_&&(d(),p=W(n,l,u.b,u.duration,0,i,c.css))),u)if(e>=u.end)m(l=u.b,1-l),ge(n,u.b,"end"),f||(u.b?d():--u.group.r||a(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;l=u.a+u.d*i(t/u.duration),m(l,1-l)}return!(!u&&!f)}))}return{run(e){o(c)?(ce||(ce=Promise.resolve()).then(()=>{ce=null}),ce).then(()=>{c=c(),m(e)}):m(e)},end(){d(),u=f=null}}}function xe(e,t){ye(e,1,1,()=>{t.delete(e.key)})}function Pe(e,t,n,r,s,a,o,i,c,l,u,f){let p=e.length,d=a.length,h=p;const m={};for(;h--;)m[e[h].key]=h;const g=[],$=new Map,v=new Map;for(h=d;h--;){const e=f(s,a,h),i=n(e);let c=o.get(i);c?r&&c.p(t,e):(c=l(i,e)).c(),$.set(i,g[h]=c),i in m&&v.set(i,Math.abs(h-m[i]))}const _=new Set,E=new Set;function b(e){be(e,1),e.m(i,u),o.set(e.key,e),u=e.first,d--}for(;p&&d;){const t=g[d-1],n=e[p-1],r=t.key,s=n.key;t===n?(u=t.first,p--,d--):$.has(s)?!o.has(r)||_.has(r)?b(t):E.has(s)?p--:v.get(r)>v.get(s)?(E.add(r),b(t)):(_.add(s),p--):(c(n,o),p--)}for(;p--;){const t=e[p];$.has(t.key)||c(t,o)}for(;d;)b(g[d-1]);return g}function Le(e,t){const n={},r={},s={$$scope:1};let a=e.length;for(;a--;){const o=e[a],i=t[a];if(i){for(const e in o)e in i||(r[e]=1);for(const e in i)s[e]||(n[e]=i[e],s[e]=1);e[a]=i}else for(const e in o)s[e]=1}for(const e in r)e in n||(n[e]=void 0);return n}function Ae(e){return"object"==typeof e&&null!==e?e:{}}function je(e,t,n){-1!==e.$$.props.indexOf(t)&&(e.$$.bound[t]=n,n(e.$$.ctx[t]))}function Re(e,t,n){const{fragment:s,on_mount:i,on_destroy:c,after_update:l}=e.$$;s.m(t,n),pe(()=>{const t=i.map(r).filter(o);c?c.push(...t):a(t),e.$$.on_mount=[]}),l.forEach(pe)}function Ce(e,t){e.$$.fragment&&(a(e.$$.on_destroy),e.$$.fragment.d(t),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={})}function Oe(t,n,r,o,i,c){const l=K;Y(t);const u=n.props||{},f=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:i,bound:s(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:s(),dirty:null};let p=!1;f.ctx=r?r(t,u,(e,n,r=n)=>(f.ctx&&i(f.ctx[e],f.ctx[e]=r)&&(f.bound[e]&&f.bound[e](r),p&&function(e,t){e.$$.dirty||(re.push(e),ue(),e.$$.dirty=s()),e.$$.dirty[t]=!0}(t,e)),n)):u,f.update(),p=!0,a(f.before_update),f.fragment=o(f.ctx),n.target&&(n.hydrate?f.fragment.l(N(n.target)):f.fragment.c(),n.intro&&be(t.$$.fragment),Re(t,n.target,n.anchor),he()),Y(l)}class ke{$destroy(){Ce(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}const De=[];function Ie(t,n=e){let r;const s=[];function a(e){if(i(t,e)&&(t=e,r)){const e=!De.length;for(let e=0;e<s.length;e+=1){const n=s[e];n[1](),De.push(n,t)}if(e){for(let e=0;e<De.length;e+=2)De[e][0](De[e+1]);De.length=0}}}return{set:a,update:function(e){a(e(t))},subscribe:function(o,i=e){const c=[o,i];return s.push(c),1===s.length&&(r=n(a)||e),o(t),()=>{const e=s.indexOf(c);-1!==e&&s.splice(e,1),0===s.length&&(r(),r=null)}}}}const Ne={},He=()=>({});function Ue(e,t){return fetch(e,{method:"POST",credentials:"include",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(e=>e.json())}function qe(e){var t,n,r,s,a,o,i;return{c(){t=P("li"),n=P("a"),r=A("Авторизация"),s=j(),a=P("li"),o=P("a"),i=A("Регистрация"),this.h()},l(e){var c=N(t=H(e,"LI",{class:!0},!1)),l=N(n=H(c,"A",{rel:!0,href:!0,class:!0},!1));r=U(l,"Авторизация"),l.forEach(w),c.forEach(w),s=q(e);var u=N(a=H(e,"LI",{class:!0},!1)),f=N(o=H(u,"A",{rel:!0,href:!0,class:!0},!1));i=U(f,"Регистрация"),f.forEach(w),u.forEach(w),this.h()},h(){k(n,"rel","prefetch"),k(n,"href","/login"),k(n,"class","nav-link"),z(n,"active","/login"===e.$page.path),k(t,"class","nav-item"),k(o,"rel","prefetch"),k(o,"href","/register"),k(o,"class","nav-link"),z(o,"active","/register"===e.$page.path),k(a,"class","nav-item")},m(e,c){S(e,t,c),y(t,n),y(n,r),S(e,s,c),S(e,a,c),y(a,o),y(o,i)},p(e,t){e.$page&&(z(n,"active","/login"===t.$page.path),z(o,"active","/register"===t.$page.path))},d(e){e&&(w(t),w(s),w(a))}}}function Ve(e){var t,n,r,s,a,o,i,c,l,u,f,p,d,h,m,g,$,v,_,E=e.$session.user.username+"";return{c(){t=P("li"),n=P("div"),r=P("a"),s=A(E),o=j(),i=P("div"),c=P("a"),l=A("Мой профиль"),f=j(),p=P("a"),d=A("Админ панель"),h=j(),m=P("div"),g=j(),$=P("button"),v=P("img"),this.h()},l(e){var a=N(t=H(e,"LI",{class:!0},!1)),u=N(n=H(a,"DIV",{class:!0},!1)),_=N(r=H(u,"A",{rel:!0,role:!0,"aria-pressed":!0,href:!0,style:!0,"aria-haspopup":!0,"aria-expanded":!0,"data-toggle":!0,class:!0},!1));s=U(_,E),_.forEach(w),o=q(u);var b=N(i=H(u,"DIV",{class:!0,style:!0},!1)),y=N(c=H(b,"A",{rel:!0,href:!0,class:!0},!1));l=U(y,"Мой профиль"),y.forEach(w),f=q(b);var S=N(p=H(b,"A",{rel:!0,href:!0,class:!0},!1));d=U(S,"Админ панель"),S.forEach(w),h=q(b),N(m=H(b,"DIV",{class:!0},!1)).forEach(w),g=q(b);var x=N($=H(b,"BUTTON",{class:!0},!1));N(v=H(x,"IMG",{src:!0,alt:!0},!1)).forEach(w),x.forEach(w),b.forEach(w),u.forEach(w),a.forEach(w),this.h()},h(){k(r,"rel","prefetch"),k(r,"role","button"),k(r,"aria-pressed","true"),k(r,"href",a="/profile/@"+e.$session.user.username),J(r,"text-align","center"),k(r,"aria-haspopup","true"),k(r,"aria-expanded","false"),k(r,"data-toggle","dropdown"),k(r,"class","nav-link "),k(c,"rel","prefetch"),k(c,"href",u="/profile/@"+e.$session.user.username+"/favorites"),k(c,"class","dropdown-item"),k(p,"rel","prefetch"),k(p,"href","/admin"),k(p,"class","dropdown-item"),k(m,"class","dropdown-divider"),k(v,"src","https://img.icons8.com/ios-filled/50/000000/logout-rounded-up.png"),k(v,"alt","logout"),k($,"class","dropdown-item logout btn btn-outline-danger"),k(i,"class","nav-dropdown dropdown-menu dropdown-menu-right"),J(i,"text-align","center"),k(n,"class","dropdown show"),k(t,"class","nav-item"),_=C($,"click",e.logout)},m(e,a){S(e,t,a),y(t,n),y(n,r),y(r,s),y(n,o),y(n,i),y(i,c),y(c,l),y(i,f),y(i,p),y(p,d),y(i,h),y(i,m),y(i,g),y(i,$),y($,v)},p(e,t){e.$session&&E!==(E=t.$session.user.username+"")&&V(s,E),e.$session&&a!==(a="/profile/@"+t.$session.user.username)&&k(r,"href",a),e.$session&&u!==(u="/profile/@"+t.$session.user.username+"/favorites")&&k(c,"href",u)},d(e){e&&w(t),_()}}}function Te(t){var n,r,s,a,o,i,c,l,u,f,p,d,h,m;function g(e,t){return t.$session.user?Ve:qe}var $=g(0,t),v=$(t);return{c(){n=P("nav"),r=P("div"),s=P("a"),a=A("Ignat Japan"),o=j(),i=P("ul"),c=P("li"),l=P("a"),u=A("Главное меню"),f=j(),p=P("li"),d=P("a"),h=A("Японская литература"),m=j(),v.c(),this.h()},l(e){var t=N(n=H(e,"NAV",{class:!0},!1)),g=N(r=H(t,"DIV",{class:!0},!1)),$=N(s=H(g,"A",{rel:!0,class:!0,href:!0},!1));a=U($,"Ignat Japan"),$.forEach(w),o=q(g);var _=N(i=H(g,"UL",{class:!0},!1)),E=N(c=H(_,"LI",{class:!0},!1)),b=N(l=H(E,"A",{rel:!0,class:!0,href:!0},!1));u=U(b,"Главное меню"),b.forEach(w),E.forEach(w),f=q(_);var y=N(p=H(_,"LI",{class:!0},!1)),S=N(d=H(y,"A",{rel:!0,class:!0,href:!0},!1));h=U(S,"Японская литература"),S.forEach(w),y.forEach(w),m=q(_),v.l(_),_.forEach(w),g.forEach(w),t.forEach(w),this.h()},h(){k(s,"rel","prefetch"),k(s,"class","navbar-brand nav-link"),k(s,"href","/"),z(s,"active","/"===t.$page.path),k(l,"rel","prefetch"),k(l,"class","nav-link"),k(l,"href","/"),z(l,"active","/"===t.$page.path),k(c,"class","nav-item"),k(d,"rel","prefetch"),k(d,"class","nav-link"),k(d,"href","/japanliterature"),z(d,"active","/japanliterature"===t.$page.path),k(p,"class","nav-item"),k(i,"class","nav navbar-nav pull-xs-right"),k(r,"class","container"),k(n,"class","navbar navbar-light")},m(e,t){S(e,n,t),y(n,r),y(r,s),y(s,a),y(r,o),y(r,i),y(i,c),y(c,l),y(l,u),y(i,f),y(i,p),y(p,d),y(d,h),y(i,m),v.m(i,null)},p(e,t){e.$page&&(z(s,"active","/"===t.$page.path),z(l,"active","/"===t.$page.path),z(d,"active","/japanliterature"===t.$page.path)),$===($=g(0,t))&&v?v.p(e,t):(v.d(1),(v=$(t))&&(v.c(),v.m(i,null)))},i:e,o:e,d(e){e&&w(n),v.d()}}}function Je(e,t,n){let r,s;const{page:a,session:o}=Ut();return c(e,a,e=>{n("$page",s=e)}),c(e,o,e=>{n("$session",r=e)}),{page:a,session:o,logout:async function(){await Ue("auth/logout"),h(o,r.user=null,r),ot("/")},$session:r,$page:s}}class Me extends ke{constructor(e){super(),Oe(this,e,Je,Te,i,[])}}function ze(e){var t,n,r,s=new Me({props:{segment:e.segment}});const a=e.$$slots.default,o=l(a,e,null);return{c(){s.$$.fragment.c(),t=j(),n=P("main"),o&&o.c()},l(e){s.$$.fragment.l(e),t=q(e);var r=N(n=H(e,"MAIN",{},!1));o&&o.l(r),r.forEach(w)},m(e,a){Re(s,e,a),S(e,t,a),S(e,n,a),o&&o.m(n,null),r=!0},p(e,t){var n={};e.segment&&(n.segment=t.segment),s.$set(n),o&&o.p&&e.$$scope&&o.p(f(a,t,e,null),u(a,t,null))},i(e){r||(be(s.$$.fragment,e),be(o,e),r=!0)},o(e){ye(s.$$.fragment,e),ye(o,e),r=!1},d(e){Ce(s,e),e&&(w(t),w(n)),o&&o.d(e)}}}function Be(e,t,n){let{segment:r}=t,{$$slots:s={},$$scope:a}=t;return e.$set=e=>{"segment"in e&&n("segment",r=e.segment),"$$scope"in e&&n("$$scope",a=e.$$scope)},{segment:r,$$slots:s,$$scope:a}}class Ke extends ke{constructor(e){super(),Oe(this,e,Be,ze,i,["segment"])}}function Fe(e){var t,n,r=e.error.stack+"";return{c(){t=P("pre"),n=A(r)},l(e){var s=N(t=H(e,"PRE",{},!1));n=U(s,r),s.forEach(w)},m(e,r){S(e,t,r),y(t,n)},p(e,t){e.error&&r!==(r=t.error.stack+"")&&V(n,r)},d(e){e&&w(t)}}}function Ge(t){var n,r,s,a,o,i,c,l,u,f=t.error.message+"";document.title=n=t.status;var p=t.dev&&t.error.stack&&Fe(t);return{c(){r=j(),s=P("h1"),a=A(t.status),o=j(),i=P("p"),c=A(f),l=j(),p&&p.c(),u=R(),this.h()},l(e){r=q(e);var n=N(s=H(e,"H1",{class:!0},!1));a=U(n,t.status),n.forEach(w),o=q(e);var d=N(i=H(e,"P",{class:!0},!1));c=U(d,f),d.forEach(w),l=q(e),p&&p.l(e),u=R(),this.h()},h(){k(s,"class","svelte-y0j2fm"),k(i,"class","svelte-y0j2fm")},m(e,t){S(e,r,t),S(e,s,t),y(s,a),S(e,o,t),S(e,i,t),y(i,c),S(e,l,t),p&&p.m(e,t),S(e,u,t)},p(e,t){e.status&&n!==(n=t.status)&&(document.title=n),e.status&&V(a,t.status),e.error&&f!==(f=t.error.message+"")&&V(c,f),t.dev&&t.error.stack?p?p.p(e,t):((p=Fe(t)).c(),p.m(u.parentNode,u)):p&&(p.d(1),p=null)},i:e,o:e,d(e){e&&(w(r),w(s),w(o),w(i),w(l)),p&&p.d(e),e&&w(u)}}}function We(e,t,n){let{error:r,status:s}=t;return e.$set=e=>{"error"in e&&n("error",r=e.error),"status"in e&&n("status",s=e.status)},{error:r,status:s,dev:!1}}class Xe extends ke{constructor(e){super(),Oe(this,e,We,Ge,i,["error","status"])}}function Ye(e){var t,r,s=[e.level1.props],a=e.level1.component;function o(e){let t={};for(var r=0;r<s.length;r+=1)t=n(t,s[r]);return{props:t}}if(a)var i=new a(o());return{c(){i&&i.$$.fragment.c(),t=R()},l(e){i&&i.$$.fragment.l(e),t=R()},m(e,n){i&&Re(i,e,n),S(e,t,n),r=!0},p(e,n){var r=e.level1?Le(s,[Ae(n.level1.props)]):{};if(a!==(a=n.level1.component)){if(i){_e();const e=i;ye(e.$$.fragment,1,0,()=>{Ce(e,1)}),Ee()}a?((i=new a(o())).$$.fragment.c(),be(i.$$.fragment,1),Re(i,t.parentNode,t)):i=null}else a&&i.$set(r)},i(e){r||(i&&be(i.$$.fragment,e),r=!0)},o(e){i&&ye(i.$$.fragment,e),r=!1},d(e){e&&w(t),i&&Ce(i,e)}}}function Qe(e){var t,n=new Xe({props:{error:e.error,status:e.status}});return{c(){n.$$.fragment.c()},l(e){n.$$.fragment.l(e)},m(e,r){Re(n,e,r),t=!0},p(e,t){var r={};e.error&&(r.error=t.error),e.status&&(r.status=t.status),n.$set(r)},i(e){t||(be(n.$$.fragment,e),t=!0)},o(e){ye(n.$$.fragment,e),t=!1},d(e){Ce(n,e)}}}function Ze(e){var t,n,r,s,a=[Qe,Ye],o=[];function i(e,t){return t.error?0:1}return t=i(0,e),n=o[t]=a[t](e),{c(){n.c(),r=R()},l(e){n.l(e),r=R()},m(e,n){o[t].m(e,n),S(e,r,n),s=!0},p(e,s){var c=t;(t=i(0,s))===c?o[t].p(e,s):(_e(),ye(o[c],1,1,()=>{o[c]=null}),Ee(),(n=o[t])||(n=o[t]=a[t](s)).c(),be(n,1),n.m(r.parentNode,r))},i(e){s||(be(n),s=!0)},o(e){ye(n),s=!1},d(e){o[t].d(e),e&&w(r)}}}function et(e){var t,r=[{segment:e.segments[0]},e.level0.props];let s={$$slots:{default:[Ze]},$$scope:{ctx:e}};for(var a=0;a<r.length;a+=1)s=n(s,r[a]);var o=new Ke({props:s});return{c(){o.$$.fragment.c()},l(e){o.$$.fragment.l(e)},m(e,n){Re(o,e,n),t=!0},p(e,t){var n=e.segments||e.level0?Le(r,[e.segments&&{segment:t.segments[0]},e.level0&&Ae(t.level0.props)]):{};(e.$$scope||e.error||e.status||e.level1)&&(n.$$scope={changed:e,ctx:t}),o.$set(n)},i(e){t||(be(o.$$.fragment,e),t=!0)},o(e){ye(o.$$.fragment,e),t=!1},d(e){Ce(o,e)}}}function tt(e,t,n){let{stores:r,error:s,status:a,segments:o,level0:i,level1:c=null}=t;var l,u;return l=Ne,u=r,Q().$$.context.set(l,u),e.$set=e=>{"stores"in e&&n("stores",r=e.stores),"error"in e&&n("error",s=e.error),"status"in e&&n("status",a=e.status),"segments"in e&&n("segments",o=e.segments),"level0"in e&&n("level0",i=e.level0),"level1"in e&&n("level1",c=e.level1)},{stores:r,error:s,status:a,segments:o,level0:i,level1:c}}class nt extends ke{constructor(e){super(),Oe(this,e,tt,et,i,["stores","error","status","segments","level0","level1"])}}const rt=[/^\/japanliterature\/data\/?$/,/^\/auth\/register\/?$/,/^\/auth\/logout\/?$/,/^\/auth\/login\/?$/,/^\/auth\/save\/?$/,/^\/auth\/user\/?$/],st=[{js:()=>import("./index.4ead456c.js"),css:[]},{js:()=>import("./index.6127c5ad.js"),css:[]},{js:()=>import("./VirtualList.a55fda8f.js"),css:[]},{js:()=>import("./ListItem.cc6d906b.js"),css:[]},{js:()=>import("./index.d2f78be4.js"),css:[]},{js:()=>import("./index.393374d8.js"),css:[]},{js:()=>import("./index.43dd4769.js"),css:[]},{js:()=>import("./[slug].5271f140.js"),css:[]},{js:()=>import("./index.ea69f6e0.js"),css:[]},{js:()=>import("./index.dfa57daa.js"),css:[]},{js:()=>import("./[view].02788103.js"),css:[]},{js:()=>import("./index.be72b925.js"),css:[]},{js:()=>import("./[slug].ddc3320e.js"),css:[]},{js:()=>import("./index.c504e17a.js"),css:[]},{js:()=>import("./index.27353763.js"),css:[]},{js:()=>import("./[p].258b68a6.js"),css:[]}],at=(e=>[{pattern:/^\/$/,parts:[{i:0}]},{pattern:/^\/japanliterature\/?$/,parts:[{i:1}]},{pattern:/^\/japanliterature\/VirtualList\/?$/,parts:[null,{i:2}]},{pattern:/^\/japanliterature\/ListItem\/?$/,parts:[null,{i:3}]},{pattern:/^\/pageliterature\/?$/,parts:[{i:4}]},{pattern:/^\/register\/?$/,parts:[{i:5}]},{pattern:/^\/settings\/?$/,parts:[{i:6}]},{pattern:/^\/article\/([^\/]+?)\/?$/,parts:[null,{i:7,params:t=>({slug:e(t[1])})}]},{pattern:/^\/profile\/?$/,parts:[{i:8}]},{pattern:/^\/profile\/([^\/]+?)\/?$/,parts:[null,{i:9,params:t=>({user:e(t[1])})}]},{pattern:/^\/profile\/([^\/]+?)\/([^\/]+?)\/?$/,parts:[null,null,{i:10,params:t=>({user:e(t[1]),view:e(t[2])})}]},{pattern:/^\/editor\/?$/,parts:[{i:11}]},{pattern:/^\/editor\/([^\/]+?)\/?$/,parts:[null,{i:12,params:t=>({slug:e(t[1])})}]},{pattern:/^\/admin\/?$/,parts:[{i:13}]},{pattern:/^\/login\/?$/,parts:[{i:14}]},{pattern:/^\/([^\/]+?)\/?$/,parts:[{i:15,params:t=>({p:e(t[1])})}]}])(decodeURIComponent);function ot(e,t={replaceState:!1}){const n=wt(new URL(e,document.baseURI));return n?(bt[t.replaceState?"replaceState":"pushState"]({id:_t},"",e),Pt(n,null).then(()=>{})):(location.href=e,new Promise(e=>{}))}const it="undefined"!=typeof __SAPPER__&&__SAPPER__;let ct,lt,ut,ft=!1,pt=[],dt="{}";const ht={page:Ie({}),preloading:Ie(null),session:Ie(it&&it.session)};let mt,gt;ht.session.subscribe(async e=>{if(mt=e,!ft)return;gt=!0;const t=wt(new URL(location.href)),n=lt={},{redirect:r,props:s,branch:a}=await At(t);n===lt&&await Lt(r,a,s,t.page)});let $t,vt=null;let _t,Et=1;const bt="undefined"!=typeof history?history:{pushState:(e,t,n)=>{},replaceState:(e,t,n)=>{},scrollRestoration:""},yt={};function St(e){const t=Object.create(null);return e.length>0&&e.slice(1).split("&").forEach(e=>{let[,n,r=""]=/([^=]*)(?:=(.*))?/.exec(decodeURIComponent(e.replace(/\+/g," ")));"string"==typeof t[n]&&(t[n]=[t[n]]),"object"==typeof t[n]?t[n].push(r):t[n]=r}),t}function wt(e){if(e.origin!==location.origin)return null;if(!e.pathname.startsWith(it.baseUrl))return null;let t=e.pathname.slice(it.baseUrl.length);if(""===t&&(t="/"),!rt.some(e=>e.test(t)))for(let n=0;n<at.length;n+=1){const r=at[n],s=r.pattern.exec(t);if(s){const n=St(e.search),a=r.parts[r.parts.length-1],o=a.params?a.params(s):{},i={host:location.host,path:t,query:n,params:o};return{href:e.href,route:r,match:s,page:i}}}}function xt(){return{x:pageXOffset,y:pageYOffset}}async function Pt(e,t,n,r){if(t)_t=t;else{const e=xt();yt[_t]=e,t=_t=++Et,yt[_t]=n?e:{x:0,y:0}}_t=t,ct&&ht.preloading.set(!0);const s=vt&&vt.href===e.href?vt.promise:At(e);vt=null;const a=lt={},{redirect:o,props:i,branch:c}=await s;if(a===lt&&(await Lt(o,c,i,e.page),document.activeElement&&document.activeElement.blur(),!n)){let e=yt[t];if(r){const t=document.getElementById(r.slice(1));t&&(e={x:0,y:t.getBoundingClientRect().top})}yt[_t]=e,e&&scrollTo(e.x,e.y)}}async function Lt(e,t,n,r){if(e)return ot(e.location,{replaceState:!0});if(ht.page.set(r),ht.preloading.set(!1),ct)ct.$set(n);else{n.stores={page:{subscribe:ht.page.subscribe},preloading:{subscribe:ht.preloading.subscribe},session:ht.session},n.level0={props:await ut};const e=document.querySelector("#sapper-head-start"),t=document.querySelector("#sapper-head-end");if(e&&t){for(;e.nextSibling!==t;)Rt(e.nextSibling);Rt(e),Rt(t)}ct=new nt({target:$t,props:n,hydrate:!0})}pt=t,dt=JSON.stringify(r.query),ft=!0,gt=!1}async function At(e){const{route:t,page:n}=e,r=n.path.split("/").filter(Boolean);let s=null;const a={error:null,status:200,segments:[r[0]]},o={fetch:(e,t)=>fetch(e,t),redirect:(e,t)=>{if(s&&(s.statusCode!==e||s.location!==t))throw new Error("Conflicting redirects");s={statusCode:e,location:t}},error:(e,t)=>{a.error="string"==typeof t?new Error(t):t,a.status=e}};let i;ut||(ut=it.preloaded[0]||He.call(o,{host:n.host,path:n.path,query:n.query,params:{}},mt));let c=1;try{const s=JSON.stringify(n.query),l=t.pattern.exec(n.path);let u=!1;i=await Promise.all(t.parts.map(async(t,i)=>{const f=r[i];if(function(e,t,n,r){if(r!==dt)return!0;const s=pt[e];return!!s&&(t!==s.segment||!(!s.match||JSON.stringify(s.match.slice(1,e+2))===JSON.stringify(n.slice(1,e+2)))||void 0)}(i,f,l,s)&&(u=!0),a.segments[c]=r[i+1],!t)return{segment:f};const p=c++;if(!gt&&!u&&pt[i]&&pt[i].part===t.i)return pt[i];u=!1;const{default:d,preload:h}=await function(e){const t="string"==typeof e.css?[]:e.css.map(jt);return t.unshift(e.js()),Promise.all(t).then(e=>e[0])}(st[t.i]);let m;return m=ft||!it.preloaded[i+1]?h?await h.call(o,{host:n.host,path:n.path,query:n.query,params:t.params?t.params(e.match):{}},mt):{}:it.preloaded[i+1],a[`level${p}`]={component:d,props:m,segment:f,match:l,part:t.i}}))}catch(e){a.error=e,a.status=500,i=[]}return{redirect:s,props:a,branch:i}}function jt(e){const t=`client/${e}`;if(!document.querySelector(`link[href="${t}"]`))return new Promise((e,n)=>{const r=document.createElement("link");r.rel="stylesheet",r.href=t,r.onload=()=>e(),r.onerror=n,document.head.appendChild(r)})}function Rt(e){e.parentNode.removeChild(e)}function Ct(e){const t=wt(new URL(e,document.baseURI));if(t)return vt&&e===vt.href||function(e,t){vt={href:e,promise:t}}(e,At(t)),vt.promise}let Ot;function kt(e){clearTimeout(Ot),Ot=setTimeout(()=>{Dt(e)},20)}function Dt(e){const t=Nt(e.target);t&&"prefetch"===t.rel&&Ct(t.href)}function It(e){if(1!==function(e){return null===e.which?e.button:e.which}(e))return;if(e.metaKey||e.ctrlKey||e.shiftKey)return;if(e.defaultPrevented)return;const t=Nt(e.target);if(!t)return;if(!t.href)return;const n="object"==typeof t.href&&"SVGAnimatedString"===t.href.constructor.name,r=String(n?t.href.baseVal:t.href);if(r===location.href)return void(location.hash||e.preventDefault());if(t.hasAttribute("download")||"external"===t.getAttribute("rel"))return;if(n?t.target.baseVal:t.target)return;const s=new URL(r);if(s.pathname===location.pathname&&s.search===location.search)return;const a=wt(s);if(a){Pt(a,null,t.hasAttribute("sapper-noscroll"),s.hash),e.preventDefault(),bt.pushState({id:_t},"",s.href)}}function Nt(e){for(;e&&"A"!==e.nodeName.toUpperCase();)e=e.parentNode;return e}function Ht(e){if(yt[_t]=xt(),e.state){const t=wt(new URL(location.href));t?Pt(t,e.state.id):location.href=location.href}else(function(e){_t=e})(Et=Et+1),bt.replaceState({id:_t},"",location.href)}const Ut=()=>(function(e){return Q().$$.context.get(e)})(Ne);var qt;qt={target:document.querySelector("#sapper")},"scrollRestoration"in bt&&(bt.scrollRestoration="manual"),function(e){$t=e}(qt.target),addEventListener("click",It),addEventListener("popstate",Ht),addEventListener("touchstart",Dt),addEventListener("mousemove",kt),Promise.resolve().then(()=>{const{hash:e,href:t}=location;bt.replaceState({id:Et},"",t);const n=new URL(location.href);if(it.error)return function(e){const{host:t,pathname:n,search:r}=location,{session:s,preloaded:a,status:o,error:i}=it;ut||(ut=a&&a[0]),Lt(null,[],{error:i,status:o,session:s,level0:{props:ut},level1:{props:{status:o,error:i},component:Xe},segments:a},{host:t,path:n,query:St(r),params:{}})}();const r=wt(n);return r?Pt(r,Et,!0,e):void 0});export{I as $,z as A,de as B,C,V as D,J as E,x as F,R as G,Pe as H,xe as I,D as J,f as K,u as L,M,l as N,pe as O,fe as P,O as Q,T as R,ke as S,a as T,Ue as U,h as V,ot as W,n as X,Le as Y,Ae as Z,L as _,ye as a,Z as a0,ne as a1,d as a2,p as a3,K as a4,we as a5,j as b,A as c,Ce as d,P as e,q as f,H as g,N as h,Oe as i,w as j,U as k,k as l,Re as m,e as n,S as o,y as p,ee as q,Ut as r,i as s,be as t,Ee as u,c as v,_e as w,te as x,se as y,je as z};
