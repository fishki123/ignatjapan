import{S as a,i as t,s,e,g as n,h as i,j as r,l,o,m as p,t as c,a as f,d as g,r as b,b as d,f as u,p as $,u as h,q as m,v,w,x as _,y as E,z as I,c as x,k as j,A as D,B as V}from"./client.0b5a1f8a.js";import{g as y}from"./api.c8188bb8.js";import{I as A}from"./index.6e54a32a.js";function S(a){var t,s,b=new A({props:{p:a.p,tab:a.tab,tag:a.tag}});return{c(){t=e("div"),b.$$.fragment.c(),this.h()},l(a){t=n(a,"DIV",{class:!0},!1);var s=i(t);b.$$.fragment.l(s),s.forEach(r),this.h()},h(){l(t,"class","container page")},m(a,e){o(a,t,e),p(b,t,null),s=!0},p(a,t){var s={};a.p&&(s.p=t.p),a.tab&&(s.tab=t.tab),a.tag&&(s.tag=t.tag),b.$set(s)},i(a){s||(c(b.$$.fragment,a),s=!0)},o(a){f(b.$$.fragment,a),s=!1},d(a){a&&r(t),g(b)}}}function k(a,t,s){let{tab:e="all",tag:n=null,p:i}=t;const{session:r}=b();return a.$set=a=>{"tab"in a&&s("tab",e=a.tab),"tag"in a&&s("tag",n=a.tag),"p"in a&&s("p",i=a.p)},{tab:e,tag:n,p:i}}class q extends a{constructor(a){super(),t(this,a,k,S,s,["tab","tag","p"])}}function z(a){var t,s;function e(s){a.mainview_tab_binding_1.call(null,s),t=!0,V(()=>t=!1)}let n={p:a.p,tag:a.tag};void 0!==a.tab&&(n.tab=a.tab);var i=new q({props:n});return E.push(()=>I(i,"tab",e)),{c(){i.$$.fragment.c()},l(a){i.$$.fragment.l(a)},m(a,t){p(i,a,t),s=!0},p(a,s){var e={};a.p&&(e.p=s.p),a.tag&&(e.tag=s.tag),!t&&a.tab&&(e.tab=s.tab),i.$set(e)},i(a){s||(c(i.$$.fragment,a),s=!0)},o(a){f(i.$$.fragment,a),s=!1},d(a){g(i,a)}}}function B(a){var t,s,b,h,m,v,w,_;function y(t){a.mainview_tab_binding.call(null,t),w=!0,V(()=>w=!1)}let A={p:a.p,tag:a.tag};void 0!==a.tab&&(A.tab=a.tab);var S=new q({props:A});return E.push(()=>I(S,"tab",y)),{c(){t=e("div"),s=e("a"),b=e("i"),h=x("Добавить японскую литературу"),m=x(" "),v=d(),S.$$.fragment.c(),this.h()},l(a){t=n(a,"DIV",{class:!0},!1);var e=i(t);s=n(e,"A",{rel:!0,href:!0},!1);var l=i(s);b=n(l,"I",{class:!0},!1);var o=i(b);h=j(o,"Добавить японскую литературу"),o.forEach(r),m=j(l," "),l.forEach(r),e.forEach(r),v=u(a),S.$$.fragment.l(a),this.h()},h(){l(b,"class","ion-compose"),l(s,"rel",""),l(s,"href","/editor"),D(s,"active","/editor"===a.$page.path),l(t,"class","container page")},m(a,e){o(a,t,e),$(t,s),$(s,b),$(b,h),$(s,m),o(a,v,e),p(S,a,e),_=!0},p(a,t){a.$page&&D(s,"active","/editor"===t.$page.path);var e={};a.p&&(e.p=t.p),a.tag&&(e.tag=t.tag),!w&&a.tab&&(e.tab=t.tab),S.$set(e)},i(a){_||(c(S.$$.fragment,a),_=!0)},o(a){f(S.$$.fragment,a),_=!1},d(a){a&&(r(t),r(v)),g(S,a)}}}function L(a){var t,s,p,g,b,m,v=[B,z],_=[];function E(a,t){return t.$session.user?0:1}return g=E(0,a),b=_[g]=v[g](a),{c(){t=d(),s=e("div"),p=e("div"),b.c(),this.h()},l(a){t=u(a),s=n(a,"DIV",{class:!0},!1);var e=i(s);p=n(e,"DIV",{class:!0},!1);var l=i(p);b.l(l),l.forEach(r),e.forEach(r),this.h()},h(){document.title="Японская литература",l(p,"class","second"),l(s,"class","first")},m(a,e){o(a,t,e),o(a,s,e),$(s,p),_[g].m(p,null),m=!0},p(a,t){var s=g;(g=E(0,t))===s?_[g].p(a,t):(w(),f(_[s],1,1,()=>{_[s]=null}),h(),(b=_[g])||(b=_[g]=v[g](t)).c(),c(b,1),b.m(p,null))},i(a){m||(c(b),m=!0)},o(a){f(b),m=!1},d(a){a&&(r(t),r(s)),_[g].d()}}}function P(a,t,s){let e,n,i,r,{p:l=1}=t;m(async()=>{({tags:r}=await y("tags"))});const{page:o,session:p}=b();v(a,o,a=>{s("$page",n=a)}),v(a,p,a=>{s("$session",e=a)});let{filters:c,filtered:f}=t;const g=_();let d=f||"all";return"undefined"!=typeof window&&(window.onpopstate=function(a){const t=new URLSearchParams(window.location.search);d=t.has("filter")?t.get("filter"):"all",g("updatefilter",d)}),a.$set=a=>{"p"in a&&s("p",l=a.p),"filters"in a&&s("filters",c=a.filters),"filtered"in a&&s("filtered",f=a.filtered)},{p:l,tab:i,tag:void 0,page:o,session:p,filters:c,filtered:f,$session:e,$page:n,mainview_tab_binding:function(a){s("tab",i=a)},mainview_tab_binding_1:function(a){s("tab",i=a)}}}export default class extends a{constructor(a){super(),t(this,a,P,L,s,["p","filters","filtered"])}}
